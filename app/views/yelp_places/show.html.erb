<div id="yelp_place_<%= @favorite.yelp_id %>" class="card mx-auto mb-3 shadow rounded-4" style="max-width: 750px;">
  <div class="row g-0">
    <div class="col-md-4">
      <img class="img-fluid h-100 rounded-start-4" src="<%= @yelp_place["image_url"] %>">
    </div>
    <div class="col-md-8">
      <div class="card-body">
      <h3 class="d-flex justify-content-center align-items-center"><%= @yelp_place.fetch("name") %></h3>
      <p class="d-flex justify-content-center align-items-center"><%= star_rating(@yelp_place.fetch("rating").to_i) %></p>
        <p><%= @yelp_place.fetch("categories").map { |c| c["title"] }.join(", ") %></p>
        
        <p>Price: <%= @yelp_place.fetch("price") %></p>
        <p>Reviews: <%= @yelp_place.fetch("review_count") %> </p>
        <%= render "favorites/form", favorite: @favorite, yelp_place: @yelp_place  %>
        
      <%= link_to @yelp_place["url"], target: "_blank", class: "btn btn-primary d-flex justify-content-center align-items-center" do %>
        <i class="fa-brands fa-yelp"></i> View on Yelp
      <% end %>
      
      </div>
    </div>
  </div>
</div>

<div>
   <%= link_to 'See Reviews', "#reviews-section", class: 'btn btn-secondary' %>
</div>

<% @yelp_reviews.each_with_index do |review, index| %>
  <div class="accordion" id="accordionExample">
    <div class="accordion-item">
      <h2 class="accordion-header" id="heading<%= index %>">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse<%= index %>" aria-expanded="true" aria-controls="collapse<%= index %>">
          <%= review["user"].fetch("name") %>
        </button>
      </h2>
      <div id="collapse<%= index %>" class="accordion-collapse collapse" aria-labelledby="heading<%= index %>" data-bs-parent="#accordionExample">
        <div class="accordion-body">
          <p><%= review["text"] %></p> 
          <%= link_to review["url"], target: "_blank", class: "btn btn-primary" do %>
            <i class="fa-brands fa-yelp"></i> See More
          <% end %>
        </div>
      </div>
    </div>
  </div>
<% end %>
